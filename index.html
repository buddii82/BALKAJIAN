<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">

  <!-- iPhone / iPad extrem wichtig -->
  <meta name="viewport"
        content="width=device-width,
                 initial-scale=1,
                 maximum-scale=1,
                 user-scalable=no">

  <title>360 Viewer</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: black;
      overflow: hidden;
    }

    #viewer {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      touch-action: none; /* für Pointer Events */
    }

    #viewer img {
      max-width: 100%;
      max-height: 100%;
      user-select: none;
      -webkit-user-drag: none;
      pointer-events: none;
    }
  </style>
</head>

<body>

<div id="viewer">
  <img id="frame" src="product1/images/0_0.jpg">
</div>

<script>
  const uCount = 21; // horizontal: 0–20
  const vCount = 14; // vertikal: 0–13

  let u = 0;
  let v = 0;

  let pointerActive = false;
  let lastX = 0;

  const viewer = document.getElementById("viewer");
  const img = document.getElementById("frame");

  function updateImage() {
    img.src = product1/images/${v}_${u}.jpg;
  }

  // Pointer Events für iPhone + iPad + PC
  viewer.addEventListener("pointerdown", e => {
    pointerActive = true;
    lastX = e.clientX;
  });

  viewer.addEventListener("pointermove", e => {
    if (!pointerActive) return;

    const delta = e.clientX - lastX;
    if (Math.abs(delta) > 10) {
      if (delta > 0) {
        u = (u - 1 + uCount) % uCount;
      } else {
        u = (u + 1) % uCount;
      }
      lastX = e.clientX;
      updateImage();
    }
  });

  viewer.addEventListener("pointerup", () => {
    pointerActive = false;
  });

  viewer.addEventListener("pointerleave", () => {
    pointerActive = false;
  });

</script>

</body>
</html>
