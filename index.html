<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">

  <meta name="viewport"
        content="width=device-width,
                 initial-scale=1,
                 maximum-scale=1,
                 user-scalable=no">

  <title>360 Viewer</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: black;
      overflow: hidden;
    }

    #viewer {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #viewer img {
      max-width: 100%;
      max-height: 100%;
      user-select: none;
      -webkit-user-drag: none;
    }
  </style>
</head>

<body>

<div id="viewer">
  <img id="frame" src="product1/images/0_0.jpg">
</div>

<script>
  const uCount = 21; // 0–20
  const vCount = 14; // 0–13

  let u = 0;
  let v = 0;

  let lastX = null;

  const viewer = document.getElementById("viewer");
  const img = document.getElementById("frame");

  function updateImage() {
    img.src = product1/images/${v}_${u}.jpg;
  }

  function handleMove(x) {
    if (lastX === null) return;

    const delta = x - lastX;

    if (Math.abs(delta) > 10) {
      if (delta > 0) {
        u = (u - 1 + uCount) % uCount;
      } else {
        u = (u + 1) % uCount;
      }
      lastX = x;
      updateImage();
    }
  }

  /* ===== PC ===== */
  viewer.addEventListener("mousedown", e => {
    lastX = e.clientX;
  });

  viewer.addEventListener("mousemove", e => {
    handleMove(e.clientX);
  });

  viewer.addEventListener("mouseup", () => {
    lastX = null;
  });

  viewer.addEventListener("mouseleave", () => {
    lastX = null;
  });

  /* ===== iPhone / iPad ===== */
  viewer.addEventListener("touchstart", e => {
    lastX = e.touches[0].clientX;
  });

  viewer.addEventListener("touchmove", e => {
    handleMove(e.touches[0].clientX);
  });

  viewer.addEventListener("touchend", () => {
    lastX = null;
  });
</script>

</body>
</html>
